<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="jquery-3.2.1.min.js"></script>
  
    <script src="websocket.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function () {
            ////通过POST方法请求，个别浏览器有可能有问题(自行测试)
            //httpposttoserver(1, "login", "123");
            ////通过Get方法jsonp请求，个别浏览器有可能有问题(自行测试)
            //httpgettoserver(1, "login", "123");
            var ss = "683A160000000D060300010044400000C012440045400000002044004640000040114400474000000083440049400000208244004A400000C06D4400";
            stringtobyte(ss);
            //conn();
        });

        function stringtobyte(hexString) {


            hexString = hexString.replace(" ", "");
            if ((hexString.length % 2) != 0)
                hexString += " ";
            var returnBytes=[];
            var len = hexString.length / 2;
            for (var i = 0; i < len; i++) {
                var tem = parseInt(hexString.substring(i * 2, i * 2 + 2), 16);
                
                returnBytes.push(tem);
            }
            return returnBytes;
        }

        var socket;
        function conn() {
            //这是使用证书时使用
            socket = new UDCsocket({
                ip: 'ws://115.28.26.204', port: 11001, conn: function () {
                  //  socket.settakon("123123");
                    alert("连接成功");
                    //socket.SendData(1, "login", "123123ssdfsdf", "");
                }
                , recData: function (text) {
                    $('#test').html("");
                    $('#test').append("收到:" + text + '<br/>  ')//这个意思你们都懂了把
                }
                , close: function () { alert("连接关闭"); }
                , error: function (msg) { alert("连接错误" + msg); }
                , jump: function (ip) { alert("服务器超过最大连接，请连接其他服务器：" + ip); }
            });

        }
        function SendData() {
            //socket.SendData(0x02, "GetLISTimei", '', "");
            socket.SendData(0x04, "getonlinedanseping", "1609092A005", "");
        }
        function SendData2() {
            socket.SendData(0x02, "GetLISTimei", '', "");
            //socket.SendData(0x04, "getonlinedanseping", "1609092A005", "");
        }
    </script>
</head>
<body>
    <button id='ToggleConnection' type="button" onclick='conn();'>
        连接服务器</button><br />
    <br />
    <button id='ToggleConnection' type="button" onclick='SendData();'>
        发送内容：beston</button><br />
    <br />
    <button id='ToggleConnection' type="button" onclick='SendData2();'>
        查看状态</button><br />
    <br />
    <div id="test" style="width:1024px"></div>
</body>
</html>
